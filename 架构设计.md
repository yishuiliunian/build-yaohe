## 核心架构与框架

> 话说天下大势，分久必合，合久必分

首先先探讨一下，结构设计所需要解决的问题或者需要满足的需求。这就像盖房子先设计图纸一样的事情。某些关键性的决策，决定了你这个房子是高楼大厦，还是砖瓦土屋。决定了你的APP的关键页面性能表现如何，以及以后的可扩展性和可维护性如何。那架构设计需要解决的核心问题有哪些？

1. 技术栈选型

2. 核心模块设计，模块间交互关系设计

3. 为可预见的业务变更和需求增加提供技术基础支撑


这是一些比较宏观的问题，而且一旦做出了这样的决策之后，对后续的影响深远。如技术栈选型，当你选择了OC的时候，势必意味着Swift会在很长一段时间内不在你的考虑范围之内。而这样的决策做起来似乎没有那么调研重组的情况发生。尤其是对一个初创型的APP而言，很多关键性的技术决策来自于最初的开发者的经验。比如对于吆喝而言，上述所涉及到几个关键决策。其实并没有经过太多的深思熟虑，而是竟然使然。但是，后面回想的时候，会把一些理论化的东西补齐，尤其是技术栈选型这个问题上。

而对于模块设计，则需要提出一个流程建模的概念。流程建模是利用抽象和逻辑关系提取两种关键技术手段，完成模块设计的过程。其一般流程是，通过对于本身业务逻辑梳理，提取出公共概念，再对公共概念进行抽象，利用所得到的抽象转化成具体的类或者函数，最后就是将所得的类与函数Coding成代码了。

这么说，有些干巴巴的。举个具体的例子吧。架构核心架构设计。

我们常见的架构设计大概有这么几种：MVP，MVC，MVVM, VIPER，FLUX.....等等。名字很多，当接触到这么多的设计模式的时候，我也晕乎乎的。到底他们之间的区别是什么，后来仔细研读了一些文章。发现他们只是职责划分不同而导致的不同。

我们先看一个常见用户点击界面之后程序进行相应的过程：![](/assets/主要流程模型.png)

1. 首先是用户点击，和用户点击捕获，在捕获之后将事件传给响应者处理

2. 响应者得到时间之后，一般会进行两个操作，操作界面作出反馈还有操作数据进行业务逻辑判断。

3. 当响应者需要进行操作的数据的时候，这里会涉及到数据操作。一般是数据库或者网络。

4. 数据读取到之后，根据数据进行业务逻辑判断。

5. 判断完成后，根据业务情况，操作界面元素。

6. 界面元素进行页面展现。

在刚刚提到的整个流程中，每个步骤都涉及到一些列的职责。而对这些职责不同的划分导致了不同的结构类型。这个流程的梳理是以数据流转为核心依据的。上述流程还只是一个简化版的流程，当把更多的细节扩展进来，将会得到一个更加清晰的流程。我们也可以提取出更多的职责。

先对于刚刚的流程进行职责切分：

| c层次 | 职责 |
| --- | --- |
| 啥 |  |
|  |  |
|  |  |



![](/assets/400px-MVC-Process.svg.png)

![](/assets/图片 1.png)

